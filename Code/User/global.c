/**
  ******************************************************************************
  * @file    global.c
  * @author  
  * @version V1.0
  * @date    2015-xx-xx
  * @brief   全局变量
  ******************************************************************************
  * @attention
  *
  * 实验平台:
  *
  ******************************************************************************
  */

#include "main.h"

struct BATTERY        Bat;
struct FLAG			  Flag;
struct RTCRX8025      Rtc;
struct CircularQueue  Queue;
struct JLYPARAMETER   JlyParam;
union  SENSEPEIZHIINFOR  Sensor1;
union  ADCADJUSTINFOR    adcjust1;

uint8_t        rtc_pt;          //秒计数
uint8_t        display_ct = 5;  //显示
uint8_t 	   uAddress ;
uint8_t        ChannelForDisplay;   //显示计数
uint8_t        StartedChannelForDisplay;    //显示启动的通道
uint8_t        Started_Channel =3;
uint8_t  	   DataBuf[HIS_ONE_BYTES+Headend_BYTES+ID_BYTES]={0};

uint16_t	   MsCount; //系统滴答计数

uint16_t       testcount;

uint16_t       adc[32];
uint16_t       adcCopy[32];

__IO uint16_t  ADC_ConvertedValue[32];
__IO uint8_t   FlagSeniorErr[32];
float          ChannelDataFloat[32];
//LCD显示码表
//const char digit[] =
//{
//	
//};

//测试表
const uint32_t lcd_test[] = 
{
	0x01,
	0x02,
	0x04,
	0x08,
	
	0x10,
	0x20,
	0x40,
	0x80,
	
	0x100,
	0x200,
	0x400,
	0x800,
	
	0x1000,
	0x2000,
	0x4000,
	0x8000,
	
	0x10000,
	0x20000,
	0x40000,
	0x80000,
	
	0x100000,
	0x200000,
	0x400000,
	0x800000,
	
	0x1000000,
	0x2000000,
	0x4000000,
	0x8000000,
	
	0x10000000,
	0x20000000,
	0x40000000,
	0x80000000,
};
//---------------------------------------------
const unsigned char RESET_ADJUST_CURVE1[100] =
 {0x0F,0x00,0x0A,0x00,0x00,0x00,0x00,0x00,    	//温度(wendu )-40~100
  0x00,0xB4,0x00,0xF8,0x01,0x9B,0x02,0x85,
  0x03,0xCA,0x05,0x55,0x07,0x12,0x08,0xCF,
  0x0A,0x71,0x0B,0xCD,0x0C,0xD5,0x0D,0xA7,
  0x0E,0x40,0x0E,0xB2,0x0E,0xFB,              	//AD
  10,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,                                  	//DEITA
  0x0A,0x0A,0x0A,0x0A,
  0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,};

const unsigned char RESET_ADJUST_CURVE2[100] =
 {0x0B,0x00,0x0A,0x00,0x00,0x00,0x00,0x00,	//湿度
    
  0x00,0x00,0x00,0x64,0x00,0xC8,0x01,0x2C,
  0x01,0x90,0x01,0xF4,0x02,0x58,0x02,0xBC,
  0x03,0x20,0x03,0x84,0x03,0xE8,            //AD

  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,                                 	//DEITA
						   		

  0x0A,0x0A,0x0A,0x0A,
  0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,};

const unsigned char RESET_ADJUST_CURVE3[100] =
 {0x0F,0x00,0x0A,0x00,0x00,0x00,0x00,0x00,    	//温度(wendu )-40~100
  0x00,0xB4,0x00,0xF8,0x01,0x9B,0x02,0x85,
  0x03,0xCA,0x05,0x55,0x07,0x12,0x08,0xCF,
  0x0A,0x71,0x0B,0xCD,0x0C,0xD5,0x0D,0xA7,
  0x0E,0x40,0x0E,0xB2,0x0E,0xFB,              	//AD
  10,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,                                  	//DEITA
  0x0A,0x0A,0x0A,0x0A,
  0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,};
 
const unsigned char RESET_ADJUST_CURVE4[100] =
 {0x0F,0x00,0x0A,0x00,0x00,0x00,0x00,0x00,    	//温度(wendu )-40~100
  0x00,0xB4,0x00,0xF8,0x01,0x9B,0x02,0x85,
  0x03,0xCA,0x05,0x55,0x07,0x12,0x08,0xCF,
  0x0A,0x71,0x0B,0xCD,0x0C,0xD5,0x0D,0xA7,
  0x0E,0x40,0x0E,0xB2,0x0E,0xFB,              	//AD
  10,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,                                  	//DEITA
  0x0A,0x0A,0x0A,0x0A,
  0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,0x0c,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,};
const char RESET_CHANNEL_SETUP_TABLE[104] =
 {0x01,0x02,0x01,0x01,0x00,0x00,0x00,0x00,  //???????????????0-7??????
                                            //A0=0x01??  A3=0x02??
 	
  0x01,0x02,0x01,0x01,0x00,0x00,0x00,0x00,  //????,?????????

  0x02,0x01,0x02,0x02,0x00,0x00,0x00,0x00,  //??????
                                            //??2?? ??1??

  0xa8,0x00,0x00,0x00,0xa8,0x00,0xa8,0x00,  //?????????????? ?????value=low*(10?high??)
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  //?????100??? 0x64 0x00 300???0x1e 0x01
                                            //??-40  ??0


  0x64,0x00,0x64,0x00,0x64,0x00,0x64,0x00,  //????
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  //????
                                            //??100 =0x64 0x00  ??100=0x64  0x00

  0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,  //??????8
  0x00,0x32,0x04,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  //boot
  0x03,0x0E,0x55,0x55,0xFC,C_VER_YEAR,C_VER_MONTH,C_VER_DAY,  //No.1??????,???0-7???????0-??7,
  };                                        

const char NewLCDCtrlWord[32] =
{
  0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,  // ???? LCD?????????
                                            // 0x01??  0x08??

  0x81,0x81,0x81,0x81,0x00,0x00,0x00,0x00,  //?????,?????????
                                            //??0.1 ??0.1

  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,  //?????,??????????0-??7?????????
                                            //0x00????AVCC,0x01????1.5??????,0x02??2.5
                                            //??????
                                            // ??AVCC ??2.5??????
  0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
};

#define Curver1_ADDRESS  (unsigned char*)0x00
#define Curver2_ADDRESS  (unsigned char*)0x01
#define Curver3_ADDRESS  (unsigned char*)0x02
#define Curver4_ADDRESS  (unsigned char*)0x03

const unsigned char *AdjustCurveFirAddress[]=
{
    Curver1_ADDRESS,Curver2_ADDRESS,
    Curver3_ADDRESS,Curver4_ADDRESS,
    RESET_ADJUST_CURVE1,RESET_ADJUST_CURVE2,
    RESET_ADJUST_CURVE3,RESET_ADJUST_CURVE4,
//    adcjust1.adcadjust_infor,
};

//! \brief 配置信息表地址映射
const uint32_t ConfMap_Address[5][2]=
{
	{VirtBasicConfAddr, 		 FRAM_BasicConfAddr},
	{VirtJlyConfAddr, 			 FRAM_JlyConfAddr},
	{VirtAlarmConfAddr, 		 FRAM_AlarmConfAddr},
	{VirtSensorChanelConfAddr, 	 FRAM_SensorChanelConfAddr},
	{VirtTempHumiAdjustConfAddr, FRAM_TempHumiAdjustConfAddr},
};
